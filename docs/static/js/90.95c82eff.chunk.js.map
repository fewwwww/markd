{"version":3,"sources":["../node_modules/@codemirror/legacy-modes/mode/textile.js"],"names":["TOKEN_STYLES","addition","attributes","bold","cite","code","definitionList","deletion","div","em","footnote","footCite","header","html","image","italic","link","linkDefinition","list1","list2","list3","notextile","pre","p","quote","span","specialChar","strong","sub","sup","table","tableHeading","handlePhraseModifier","stream","state","ch","eat","togglePhraseModifier","match","tokenStyles","type","phraseModifier","closeRE","openSize","charBefore","pos","string","charAt","charAfter","peek","test","RegExp","source","mode","Modes","disabled","textileDisabled","styles","layoutType","push","concat","i","arguments","length","activeStyles","join","REs","cache","single","bc","bq","definitionListEnd","drawTable","foot","list","para","tableCellAttributes","tableText","text","align","selector","lang","pad","css","createRe","name","makeRe","RE","choiceRe","pattern","arg","parts","unshift","apply","newLayout","spanningLayout","blockType","newMode","parseInt","next","layoutLength","listDepth","listMod","skipToEnd","tableCell","textile","startState","token","sol","startNewLine","blankLine","key","hasOwnProperty"],"mappings":"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","file":"static/js/90.95c82eff.chunk.js","sourcesContent":["var TOKEN_STYLES = {\n  addition: \"inserted\",\n  attributes: \"propertyName\",\n  bold: \"strong\",\n  cite: \"keyword\",\n  code: \"monospace\",\n  definitionList: \"list\",\n  deletion: \"deleted\",\n  div: \"punctuation\",\n  em: \"emphasis\",\n  footnote: \"variable\",\n  footCite: \"qualifier\",\n  header: \"heading\",\n  html: \"comment\",\n  image: \"atom\",\n  italic: \"emphasis\",\n  link: \"link\",\n  linkDefinition: \"link\",\n  list1: \"list\",\n  list2: \"list.special\",\n  list3: \"list\",\n  notextile: \"string.special\",\n  pre: \"operator\",\n  p: \"content\",\n  quote: \"bracket\",\n  span: \"quote\",\n  specialChar: \"character\",\n  strong: \"strong\",\n  sub: \"content.special\",\n  sup: \"content.special\",\n  table: \"variableName.special\",\n  tableHeading: \"operator\"\n};\n\nfunction startNewLine(stream, state) {\n  state.mode = Modes.newLayout;\n  state.tableHeading = false;\n  if (state.layoutType === \"definitionList\" && state.spanningLayout && stream.match(RE(\"definitionListEnd\"), false)) state.spanningLayout = false;\n}\n\nfunction handlePhraseModifier(stream, state, ch) {\n  if (ch === \"_\") {\n    if (stream.eat(\"_\")) return togglePhraseModifier(stream, state, \"italic\", /__/, 2);else return togglePhraseModifier(stream, state, \"em\", /_/, 1);\n  }\n\n  if (ch === \"*\") {\n    if (stream.eat(\"*\")) {\n      return togglePhraseModifier(stream, state, \"bold\", /\\*\\*/, 2);\n    }\n\n    return togglePhraseModifier(stream, state, \"strong\", /\\*/, 1);\n  }\n\n  if (ch === \"[\") {\n    if (stream.match(/\\d+\\]/)) state.footCite = true;\n    return tokenStyles(state);\n  }\n\n  if (ch === \"(\") {\n    var spec = stream.match(/^(r|tm|c)\\)/);\n    if (spec) return TOKEN_STYLES.specialChar;\n  }\n\n  if (ch === \"<\" && stream.match(/(\\w+)[^>]+>[^<]+<\\/\\1>/)) return TOKEN_STYLES.html;\n  if (ch === \"?\" && stream.eat(\"?\")) return togglePhraseModifier(stream, state, \"cite\", /\\?\\?/, 2);\n  if (ch === \"=\" && stream.eat(\"=\")) return togglePhraseModifier(stream, state, \"notextile\", /==/, 2);\n  if (ch === \"-\" && !stream.eat(\"-\")) return togglePhraseModifier(stream, state, \"deletion\", /-/, 1);\n  if (ch === \"+\") return togglePhraseModifier(stream, state, \"addition\", /\\+/, 1);\n  if (ch === \"~\") return togglePhraseModifier(stream, state, \"sub\", /~/, 1);\n  if (ch === \"^\") return togglePhraseModifier(stream, state, \"sup\", /\\^/, 1);\n  if (ch === \"%\") return togglePhraseModifier(stream, state, \"span\", /%/, 1);\n  if (ch === \"@\") return togglePhraseModifier(stream, state, \"code\", /@/, 1);\n\n  if (ch === \"!\") {\n    var type = togglePhraseModifier(stream, state, \"image\", /(?:\\([^\\)]+\\))?!/, 1);\n    stream.match(/^:\\S+/); // optional Url portion\n\n    return type;\n  }\n\n  return tokenStyles(state);\n}\n\nfunction togglePhraseModifier(stream, state, phraseModifier, closeRE, openSize) {\n  var charBefore = stream.pos > openSize ? stream.string.charAt(stream.pos - openSize - 1) : null;\n  var charAfter = stream.peek();\n\n  if (state[phraseModifier]) {\n    if ((!charAfter || /\\W/.test(charAfter)) && charBefore && /\\S/.test(charBefore)) {\n      var type = tokenStyles(state);\n      state[phraseModifier] = false;\n      return type;\n    }\n  } else if ((!charBefore || /\\W/.test(charBefore)) && charAfter && /\\S/.test(charAfter) && stream.match(new RegExp(\"^.*\\\\S\" + closeRE.source + \"(?:\\\\W|$)\"), false)) {\n    state[phraseModifier] = true;\n    state.mode = Modes.attributes;\n  }\n\n  return tokenStyles(state);\n}\n\n;\n\nfunction tokenStyles(state) {\n  var disabled = textileDisabled(state);\n  if (disabled) return disabled;\n  var styles = [];\n  if (state.layoutType) styles.push(TOKEN_STYLES[state.layoutType]);\n  styles = styles.concat(activeStyles(state, \"addition\", \"bold\", \"cite\", \"code\", \"deletion\", \"em\", \"footCite\", \"image\", \"italic\", \"link\", \"span\", \"strong\", \"sub\", \"sup\", \"table\", \"tableHeading\"));\n  if (state.layoutType === \"header\") styles.push(TOKEN_STYLES.header + \"-\" + state.header);\n  return styles.length ? styles.join(\" \") : null;\n}\n\nfunction textileDisabled(state) {\n  var type = state.layoutType;\n\n  switch (type) {\n    case \"notextile\":\n    case \"code\":\n    case \"pre\":\n      return TOKEN_STYLES[type];\n\n    default:\n      if (state.notextile) return TOKEN_STYLES.notextile + (type ? \" \" + TOKEN_STYLES[type] : \"\");\n      return null;\n  }\n}\n\nfunction activeStyles(state) {\n  var styles = [];\n\n  for (var i = 1; i < arguments.length; ++i) {\n    if (state[arguments[i]]) styles.push(TOKEN_STYLES[arguments[i]]);\n  }\n\n  return styles;\n}\n\nfunction blankLine(state) {\n  var spanningLayout = state.spanningLayout,\n      type = state.layoutType;\n\n  for (var key in state) {\n    if (state.hasOwnProperty(key)) delete state[key];\n  }\n\n  state.mode = Modes.newLayout;\n\n  if (spanningLayout) {\n    state.layoutType = type;\n    state.spanningLayout = true;\n  }\n}\n\nvar REs = {\n  cache: {},\n  single: {\n    bc: \"bc\",\n    bq: \"bq\",\n    definitionList: /- .*?:=+/,\n    definitionListEnd: /.*=:\\s*$/,\n    div: \"div\",\n    drawTable: /\\|.*\\|/,\n    foot: /fn\\d+/,\n    header: /h[1-6]/,\n    html: /\\s*<(?:\\/)?(\\w+)(?:[^>]+)?>(?:[^<]+<\\/\\1>)?/,\n    link: /[^\"]+\":\\S/,\n    linkDefinition: /\\[[^\\s\\]]+\\]\\S+/,\n    list: /(?:#+|\\*+)/,\n    notextile: \"notextile\",\n    para: \"p\",\n    pre: \"pre\",\n    table: \"table\",\n    tableCellAttributes: /[\\/\\\\]\\d+/,\n    tableHeading: /\\|_\\./,\n    tableText: /[^\"_\\*\\[\\(\\?\\+~\\^%@|-]+/,\n    text: /[^!\"_=\\*\\[\\(<\\?\\+~\\^%@-]+/\n  },\n  attributes: {\n    align: /(?:<>|<|>|=)/,\n    selector: /\\([^\\(][^\\)]+\\)/,\n    lang: /\\[[^\\[\\]]+\\]/,\n    pad: /(?:\\(+|\\)+){1,2}/,\n    css: /\\{[^\\}]+\\}/\n  },\n  createRe: function createRe(name) {\n    switch (name) {\n      case \"drawTable\":\n        return REs.makeRe(\"^\", REs.single.drawTable, \"$\");\n\n      case \"html\":\n        return REs.makeRe(\"^\", REs.single.html, \"(?:\", REs.single.html, \")*\", \"$\");\n\n      case \"linkDefinition\":\n        return REs.makeRe(\"^\", REs.single.linkDefinition, \"$\");\n\n      case \"listLayout\":\n        return REs.makeRe(\"^\", REs.single.list, RE(\"allAttributes\"), \"*\\\\s+\");\n\n      case \"tableCellAttributes\":\n        return REs.makeRe(\"^\", REs.choiceRe(REs.single.tableCellAttributes, RE(\"allAttributes\")), \"+\\\\.\");\n\n      case \"type\":\n        return REs.makeRe(\"^\", RE(\"allTypes\"));\n\n      case \"typeLayout\":\n        return REs.makeRe(\"^\", RE(\"allTypes\"), RE(\"allAttributes\"), \"*\\\\.\\\\.?\", \"(\\\\s+|$)\");\n\n      case \"attributes\":\n        return REs.makeRe(\"^\", RE(\"allAttributes\"), \"+\");\n\n      case \"allTypes\":\n        return REs.choiceRe(REs.single.div, REs.single.foot, REs.single.header, REs.single.bc, REs.single.bq, REs.single.notextile, REs.single.pre, REs.single.table, REs.single.para);\n\n      case \"allAttributes\":\n        return REs.choiceRe(REs.attributes.selector, REs.attributes.css, REs.attributes.lang, REs.attributes.align, REs.attributes.pad);\n\n      default:\n        return REs.makeRe(\"^\", REs.single[name]);\n    }\n  },\n  makeRe: function makeRe() {\n    var pattern = \"\";\n\n    for (var i = 0; i < arguments.length; ++i) {\n      var arg = arguments[i];\n      pattern += typeof arg === \"string\" ? arg : arg.source;\n    }\n\n    return new RegExp(pattern);\n  },\n  choiceRe: function choiceRe() {\n    var parts = [arguments[0]];\n\n    for (var i = 1; i < arguments.length; ++i) {\n      parts[i * 2 - 1] = \"|\";\n      parts[i * 2] = arguments[i];\n    }\n\n    parts.unshift(\"(?:\");\n    parts.push(\")\");\n    return REs.makeRe.apply(null, parts);\n  }\n};\n\nfunction RE(name) {\n  return REs.cache[name] || (REs.cache[name] = REs.createRe(name));\n}\n\nvar Modes = {\n  newLayout: function newLayout(stream, state) {\n    if (stream.match(RE(\"typeLayout\"), false)) {\n      state.spanningLayout = false;\n      return (state.mode = Modes.blockType)(stream, state);\n    }\n\n    var newMode;\n\n    if (!textileDisabled(state)) {\n      if (stream.match(RE(\"listLayout\"), false)) newMode = Modes.list;else if (stream.match(RE(\"drawTable\"), false)) newMode = Modes.table;else if (stream.match(RE(\"linkDefinition\"), false)) newMode = Modes.linkDefinition;else if (stream.match(RE(\"definitionList\"))) newMode = Modes.definitionList;else if (stream.match(RE(\"html\"), false)) newMode = Modes.html;\n    }\n\n    return (state.mode = newMode || Modes.text)(stream, state);\n  },\n  blockType: function blockType(stream, state) {\n    var match, type;\n    state.layoutType = null;\n    if (match = stream.match(RE(\"type\"))) type = match[0];else return (state.mode = Modes.text)(stream, state);\n\n    if (match = type.match(RE(\"header\"))) {\n      state.layoutType = \"header\";\n      state.header = parseInt(match[0][1]);\n    } else if (type.match(RE(\"bq\"))) {\n      state.layoutType = \"quote\";\n    } else if (type.match(RE(\"bc\"))) {\n      state.layoutType = \"code\";\n    } else if (type.match(RE(\"foot\"))) {\n      state.layoutType = \"footnote\";\n    } else if (type.match(RE(\"notextile\"))) {\n      state.layoutType = \"notextile\";\n    } else if (type.match(RE(\"pre\"))) {\n      state.layoutType = \"pre\";\n    } else if (type.match(RE(\"div\"))) {\n      state.layoutType = \"div\";\n    } else if (type.match(RE(\"table\"))) {\n      state.layoutType = \"table\";\n    }\n\n    state.mode = Modes.attributes;\n    return tokenStyles(state);\n  },\n  text: function text(stream, state) {\n    if (stream.match(RE(\"text\"))) return tokenStyles(state);\n    var ch = stream.next();\n    if (ch === '\"') return (state.mode = Modes.link)(stream, state);\n    return handlePhraseModifier(stream, state, ch);\n  },\n  attributes: function attributes(stream, state) {\n    state.mode = Modes.layoutLength;\n    if (stream.match(RE(\"attributes\"))) return TOKEN_STYLES.attributes;else return tokenStyles(state);\n  },\n  layoutLength: function layoutLength(stream, state) {\n    if (stream.eat(\".\") && stream.eat(\".\")) state.spanningLayout = true;\n    state.mode = Modes.text;\n    return tokenStyles(state);\n  },\n  list: function list(stream, state) {\n    var match = stream.match(RE(\"list\"));\n    state.listDepth = match[0].length;\n    var listMod = (state.listDepth - 1) % 3;\n    if (!listMod) state.layoutType = \"list1\";else if (listMod === 1) state.layoutType = \"list2\";else state.layoutType = \"list3\";\n    state.mode = Modes.attributes;\n    return tokenStyles(state);\n  },\n  link: function link(stream, state) {\n    state.mode = Modes.text;\n\n    if (stream.match(RE(\"link\"))) {\n      stream.match(/\\S+/);\n      return TOKEN_STYLES.link;\n    }\n\n    return tokenStyles(state);\n  },\n  linkDefinition: function linkDefinition(stream) {\n    stream.skipToEnd();\n    return TOKEN_STYLES.linkDefinition;\n  },\n  definitionList: function definitionList(stream, state) {\n    stream.match(RE(\"definitionList\"));\n    state.layoutType = \"definitionList\";\n    if (stream.match(/\\s*$/)) state.spanningLayout = true;else state.mode = Modes.attributes;\n    return tokenStyles(state);\n  },\n  html: function html(stream) {\n    stream.skipToEnd();\n    return TOKEN_STYLES.html;\n  },\n  table: function table(stream, state) {\n    state.layoutType = \"table\";\n    return (state.mode = Modes.tableCell)(stream, state);\n  },\n  tableCell: function tableCell(stream, state) {\n    if (stream.match(RE(\"tableHeading\"))) state.tableHeading = true;else stream.eat(\"|\");\n    state.mode = Modes.tableCellAttributes;\n    return tokenStyles(state);\n  },\n  tableCellAttributes: function tableCellAttributes(stream, state) {\n    state.mode = Modes.tableText;\n    if (stream.match(RE(\"tableCellAttributes\"))) return TOKEN_STYLES.attributes;else return tokenStyles(state);\n  },\n  tableText: function tableText(stream, state) {\n    if (stream.match(RE(\"tableText\"))) return tokenStyles(state);\n\n    if (stream.peek() === \"|\") {\n      // end of cell\n      state.mode = Modes.tableCell;\n      return tokenStyles(state);\n    }\n\n    return handlePhraseModifier(stream, state, stream.next());\n  }\n};\nexport var textile = {\n  startState: function startState() {\n    return {\n      mode: Modes.newLayout\n    };\n  },\n  token: function token(stream, state) {\n    if (stream.sol()) startNewLine(stream, state);\n    return state.mode(stream, state);\n  },\n  blankLine: blankLine\n};"],"sourceRoot":""}